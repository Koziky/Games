<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KOZYGAMES</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Roboto', Arial, sans-serif; }
    body { background: #111; color: white; min-height: 100vh; }

    /* Header */
    header {
      background: linear-gradient(to bottom, rgba(0,0,0,0.9), rgba(0,0,0,0));
      padding: 15px 40px;
      display: flex; justify-content: space-between; align-items: center;
      position: sticky; top: 0; z-index: 10;
    }
    .logo { font-size: 26px; font-weight: bold; color: red; letter-spacing: 2px; }
    nav { display: flex; gap: 25px; }
    nav a { color: white; text-decoration: none; font-size: 16px; transition: 0.2s; }
    nav a:hover { color: red; }
    .nav-right { display: flex; align-items: center; gap: 20px; }
    .search-bar {
      background: rgba(30,30,30,0.8);
      border-radius: 25px;
      padding: 6px 15px;
      display: flex; align-items: center;
    }
    .search-bar input {
      background: none; border: none; color: white;
      outline: none; width: 160px; font-size: 14px;
    }
    .icon-btn { cursor: pointer; font-size: 20px; transition: 0.2s; }
    .icon-btn:hover { color: red; }
    .profile-icon { background: red; padding: 8px; border-radius: 50%; }

    /* Hero Section */
    #hero {
      position: relative;
      width: 100%;
      height: 60vh;
      background: black;
      display: flex;
      align-items: flex-end;
      padding: 40px;
      background-size: cover;
      background-position: center;
    }
    #hero-overlay {
      background: linear-gradient(to top, rgba(0,0,0,0.9), rgba(0,0,0,0));
      position: absolute; top: 0; left: 0; right: 0; bottom: 0;
    }
    #hero-content {
      position: relative;
      z-index: 2;
      max-width: 600px;
    }
    #hero h1 { font-size: 40px; margin-bottom: 10px; }
    #hero p { font-size: 16px; margin-bottom: 20px; }
    .hero-buttons { display: flex; gap: 15px; }
    .hero-btn {
      background: red; border: none; padding: 10px 20px;
      border-radius: 6px; color: white; font-size: 16px; cursor: pointer;
    }
    .hero-btn.secondary { background: rgba(255,255,255,0.2); }

    /* Grid */
    #gameGrid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 28px; padding: 40px;
    }

    /* Game Card */
    .game-card {
      background: #181a1f; border-radius: 14px;
      padding: 15px; display: flex; flex-direction: column;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      height: 380px; cursor: pointer;
    }
    .game-card:hover { transform: scale(1.04); box-shadow: 0 6px 20px rgba(255,0,0,0.4); }
    .game-card img {
      width: 100%; height: 180px; object-fit: cover;
      border-radius: 8px; margin-bottom: 14px;
    }
    .game-card h3 { font-size: 18px; }
    .divider {
      height: 1px; background: #333; margin: 8px 0;
    }
    .game-card p { font-size: 13px; color: #bbb; flex-grow: 1; }

    .save-btn {
      background: red; color: white; border: none;
      padding: 4px 10px; border-radius: 6px;
      cursor: pointer; font-size: 13px;
      transition: 0.2s; width: fit-content;
    }
    .save-btn.saved { background: green; }
    .save-btn.saved::after { content: " âœ…"; }

    /* Modal */
    .modal {
      display: none; position: fixed; z-index: 20;
      left: 0; top: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.9);
      justify-content: center; align-items: center;
    }
    .modal-content {
      background: #1c1f26; border-radius: 14px;
      width: 90%; max-width: 1000px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.7);
      padding: 20px; position: relative;
      display: flex; flex-direction: column; gap: 15px;
    }
    .modal-header { display: flex; justify-content: space-between; align-items: center; }
    .modal-header h2 { font-size: 22px; }
    .close { font-size: 28px; cursor: pointer; color: #aaa; }
    .close:hover { color: red; }
    .modal-content iframe { width: 100%; height: 500px; border-radius: 8px; }
    .fullscreen-btn, .save-btn-inside {
      background: red; color: white; border: none;
      padding: 6px 12px; border-radius: 6px;
      cursor: pointer; font-size: 14px;
      transition: 0.2s; margin-right: 8px;
    }
    .save-btn-inside.saved { background: green; }
    .save-btn-inside.saved::after { content: " âœ…"; }
  </style>
</head>
<body>
  <header>
    <div class="logo">KOZYGAMES</div>
    <nav>
      <a href="#" onclick="showPage('home')">Home</a>
      <a href="#" onclick="showPage('games')">Games</a>
      <a href="#" onclick="showPage('saved')">Saved</a>
    </nav>
    <div class="nav-right">
      <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Search..." oninput="searchGames()">
      </div>
      <span class="icon-btn">ðŸ””</span>
      <span class="profile-icon">ðŸ‘¤</span>
    </div>
  </header>

  <!-- Hero Section -->
  <section id="hero">
    <div id="hero-overlay"></div>
    <div id="hero-content">
      <h1 id="heroTitle">Featured Game</h1>
      <p id="heroDesc">Most played game will appear here.</p>
      <div class="hero-buttons">
        <button class="hero-btn" onclick="playFeatured()">â–¶ Play Now</button>
        <button class="hero-btn secondary" onclick="showPage('saved')">+ My List</button>
      </div>
    </div>
  </section>

  <main><div id="gameGrid"></div></main>

  <!-- Modal -->
  <div id="gameModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTitle"></h2>
        <span class="close" onclick="closeGame()">&times;</span>
      </div>
      <p id="modalDesc"></p>
      <div>
        <button class="save-btn-inside" id="saveInsideBtn" onclick="toggleSave(currentGame)">Save</button>
        <button class="fullscreen-btn" onclick="toggleFullscreen()">â›¶ Fullscreen</button>
      </div>
      <iframe id="gameFrame" src="" frameborder="0"></iframe>
    </div>
  </div>

  <script>
    const games = [
      {
        name: "Cars Arena",
        img: "https://img.cdn.famobi.com/portal/html5games/images/tmp/CarsArenaTeaser.jpg?v=0.2-50426de7",
        url: "https://play.famobi.com/cars-arena/A1000-10A",
        release: "2025-09-05",
        description: "Drive and smash cars off the arena."
      },
      {
        name: "Tunnel Rush",
        img: "https://img.gamedistribution.com/6c1a17f5aabc440a8e0d5e05d39bfb36-512x384.jpeg",
        url: "https://play.famobi.com/tunnel-rush/A1000-10",
        release: "2025-09-01",
        description: "Dodge obstacles in a crazy neon tunnel."
      }
    ];

    const grid = document.getElementById("gameGrid");
    const modal = document.getElementById("gameModal");
    const gameFrame = document.getElementById("gameFrame");
    const modalTitle = document.getElementById("modalTitle");
    const modalDesc = document.getElementById("modalDesc");
    const saveInsideBtn = document.getElementById("saveInsideBtn");
    const hero = document.getElementById("hero");
    const heroTitle = document.getElementById("heroTitle");
    const heroDesc = document.getElementById("heroDesc");
    let savedGames = JSON.parse(localStorage.getItem("savedGames") || "[]");
    let playCounts = JSON.parse(localStorage.getItem("playCounts") || "{}");
    let currentGame = null;
    let currentPage = "home";

    function renderGames() {
      grid.innerHTML = "";
      let list = games;

      if (currentPage === "saved") {
        list = games.filter(g => savedGames.includes(g.name));
      }

      const search = document.getElementById("searchInput").value.toLowerCase();
      list = list.filter(g => g.name.toLowerCase().includes(search));

      list.forEach(game => {
        const card = document.createElement("div");
        card.className = "game-card";
        card.innerHTML = `
          <img src="${game.img}" alt="${game.name}">
          <h3>${game.name}</h3>
          <div class="divider"></div>
          <p>${game.description}</p>
          <button class="save-btn ${savedGames.includes(game.name) ? "saved" : ""}">Save</button>
        `;
        card.querySelector(".save-btn").addEventListener("click", (e) => {
          e.stopPropagation();
          toggleSave(game);
          renderGames();
        });
        card.addEventListener("click", () => openGame(game));
        grid.appendChild(card);
      });

      updateHero();
    }

    function openGame(game) {
      currentGame = game;
      modal.style.display = "flex";
      modalTitle.textContent = game.name;
      modalDesc.textContent = game.description;
      gameFrame.src = game.url;

      playCounts[game.name] = (playCounts[game.name] || 0) + 1;
      localStorage.setItem("playCounts", JSON.stringify(playCounts));

      updateSaveButton();
      updateHero();
    }

    function closeGame() {
      modal.style.display = "none";
      gameFrame.src = "";
    }

    function toggleSave(game) {
      if (savedGames.includes(game.name)) {
        savedGames = savedGames.filter(g => g !== game.name);
      } else {
        savedGames.push(game.name);
      }
      localStorage.setItem("savedGames", JSON.stringify(savedGames));
      updateSaveButton();
      renderGames();
    }

    function updateSaveButton() {
      if (!currentGame) return;
      if (savedGames.includes(currentGame.name)) {
        saveInsideBtn.classList.add("saved");
        saveInsideBtn.textContent = "Saved âœ…";
      } else {
        saveInsideBtn.classList.remove("saved");
        saveInsideBtn.textContent = "Save";
      }
    }

    function toggleFullscreen() {
      if (gameFrame.requestFullscreen) {
        gameFrame.requestFullscreen();
      }
    }

    function showPage(page) {
      currentPage = page;
      renderGames();
    }

    function searchGames() {
      renderGames();
    }

    function updateHero() {
      let mostPlayed = null;
      let maxPlays = 0;
      for (const g of games) {
        const plays = playCounts[g.name] || 0;
        if (plays > maxPlays) {
          maxPlays = plays;
          mostPlayed = g;
        }
      }
      if (mostPlayed) {
        hero.style.backgroundImage = `url('${mostPlayed.img}')`;
        heroTitle.textContent = mostPlayed.name;
        heroDesc.textContent = mostPlayed.description;
      }
    }

    function playFeatured() {
      let mostPlayed = null;
      let maxPlays = 0;
      for (const g of games) {
        const plays = playCounts[g.name] || 0;
        if (plays > maxPlays) {
          maxPlays = plays;
          mostPlayed = g;
        }
      }
      if (mostPlayed) {
        openGame(mostPlayed);
      }
    }

    renderGames();
  </script>
</body>
</html>
